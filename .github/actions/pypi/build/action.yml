name: "Build Python Package"
description: "Build a Python package"
 
inputs:
  ref:
    description: 'Git ref to scan'
    required: false
    type: string
    default: 'main'
  python-version:
    description: "Python version"
    required: true
    type: string
    default: "3.12"

runs:
  using: "composite"
  steps:
    - name: Checkout repository without Versioning
      id: repo-checkout-no-versioning
      uses: actions/checkout@v6
      with:
        ref: ${{ inputs.ref != '' && inputs.ref || github.ref }}

    - name: Set Up Python
      id: python-setup
      uses: actions/setup-python@v5
      with:
        python-version: ${{ inputs.python_version }}

    - name: Install Python Build Tools
      id: install-dependencies
      run: |
        python -m pip install --upgrade pip
        pip install build

    - name: Build PyPi Package
      id: pypi-build
      run: |
        python -m build --wheel

    - name: Upload Build Artifact
      uses: actions/upload-artifact@v6
      with:
        name: dist
        path: dist/